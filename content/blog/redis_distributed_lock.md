---
title: "Redis_distributed_lock"
date: 2020-07-06T10:10:38+08:00
draft: true
---

分布式环境中，如何控制某些特定的操作在限定条件下只「执行一次」，比如说；app的push信息，不重复的发送，对于成本和用户体验都是正确的事情，但是现实是复杂的。
用户double click，甚至根本就不限制用户的点击，假设用户点击了同样的事件，那么服务器有必要发送两条一摸一样的push？ 当然不应该，那么问题就是，如何控制在一定限定条件下的分布式资源不被重复使用呢？


# 现实世界你会怎么做？

大家会想到排队，先到先得，卖完即止。排队的人就是竞争发送push的action，卖家就是服务器的action。排队就是一个串行化的过程，将分布式的环境变换成「single point」， 那么问题是，有什么工具可以提供这样的功能呢？ 我们是不是自己也可以造一个这样的tool呢？

# redis分布式锁

redis分为单机版本和集群版本，一般而言，现在大部分的公司都会使用集群版本，这些是后话了，我们关心的是redis可以实现我们的需求吗？